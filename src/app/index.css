@import "tailwindcss";

/* 1. CSS Variables */
:root {
  /* --- LIGHT THEME --- */
  --background-light: #f8f9fa;
  --text-primary-light: #18181b;
  --text-secondary-light: #52525b;
  --accent-light: #2563eb;
  --panel-bg-light: rgba(255, 255, 255, 0.95);
  --prelayer-1-light: #e4e4e7;
  --prelayer-2-light: #d4d4d8;

  /* --- DARK THEME --- */
  --background-dark: #09090b;
  --text-primary-dark: #f4f4f5;
  --text-secondary-dark: #a1a1aa;
  --accent-dark: #60a5fa;
  --panel-bg-dark: rgba(24, 24, 27, 0.85);
  --prelayer-1-dark: #18181b;
  --prelayer-2-dark: #27272a;
}

/* 2. Tailwind Configuration */
@theme {
  --font-sans: "Poppins", system-ui, sans-serif;

  --color-background: var(--background);
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-accent: var(--accent);
  --color-panel-bg: var(--panel-bg);
  --color-prelayer-1: var(--prelayer-1);
  --color-prelayer-2: var(--prelayer-2);

  --z-index-60: 60;
  --z-index-100: 100;
  --z-index-1001: 1001;

  --animate-cell-ripple: cell-ripple 0.5s ease-out forwards;

  /* Slower, smoother animations */
  --animate-logo-loading: logo-loading 4s ease-in-out infinite;
  --animate-logo-intro: logo-draw 3.5s ease-in-out 1 forwards;
  --animate-logo-interaction: logo-interaction 2s cubic-bezier(0.25, 1, 0.5, 1)
    forwards;

  @keyframes cell-ripple {
    0% {
      opacity: 0.4;
      background-color: var(--accent);
    }
    50% {
      opacity: 0.8;
      background-color: var(--accent);
    }
    100% {
      opacity: 0.4;
      background-color: transparent;
    }
  }

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes logo-loading {
    0% {
      stroke-dashoffset: 0;
      opacity: 1;
    }
    50% {
      stroke-dashoffset: 2150;
      opacity: 0.3;
    }
    100% {
      stroke-dashoffset: 0;
      opacity: 1;
    }
  }

  @keyframes logo-draw {
    from {
      stroke-dashoffset: 2150;
    }
    to {
      stroke-dashoffset: 0;
    }
  }

  @keyframes logo-interaction {
    0% {
      stroke-dashoffset: 0;
    }
    40% {
      stroke-dashoffset: 2150;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }
}

/* 3. View Transitions */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}
::view-transition-old(root) {
  z-index: 1;
}
::view-transition-new(root) {
  z-index: 99999;
}
.dark::view-transition-old(root) {
  z-index: 99999;
}
.dark::view-transition-new(root) {
  z-index: 1;
}

/* 4. Base Styles */
@layer base {
  html {
    scroll-behavior: smooth;
    overflow-y: scroll;

    /* DEFAULT THEME (Dark) */
    --background: var(--background-dark);
    --text-primary: var(--text-primary-dark);
    --text-secondary: var(--text-secondary-dark);
    --accent: var(--accent-dark);
    --panel-bg: var(--panel-bg-dark);
    --prelayer-1: var(--prelayer-1-dark);
    --prelayer-2: var(--prelayer-2-dark);
  }

  html[data-theme="light"] {
    --background: var(--background-light);
    --text-primary: var(--text-primary-light);
    --text-secondary: var(--text-secondary-light);
    --accent: var(--accent-light);
    --panel-bg: var(--panel-bg-light);
    --prelayer-1: var(--prelayer-1-light);
    --prelayer-2: var(--prelayer-2-light);
  }

  body {
    background-color: var(--background);
    color: var(--text-primary);
    font-family: var(--font-sans);
    overflow-x: hidden;
    overflow-y: scroll !important;
    padding-right: 0 !important;
    transition:
      color 0.3s ease,
      background-color 0.3s ease;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background-color: var(--prelayer-2);
    border-radius: 9999px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--text-secondary);
  }

  :focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    border-radius: 4px;
  }

  html[data-theme="dark"] .cursor-invert {
    filter: invert(1);
  }
}
